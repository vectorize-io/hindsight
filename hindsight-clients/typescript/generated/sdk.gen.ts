// This file is auto-generated by @hey-api/openapi-ts

import type { Client, Options as Options2, TDataShape } from './client';
import { client } from './client.gen';
import type { AddBankBackgroundData, AddBankBackgroundErrors, AddBankBackgroundResponses, CancelOperationData, CancelOperationErrors, CancelOperationResponses, ClearBankMemoriesData, ClearBankMemoriesErrors, ClearBankMemoriesResponses, CreateOrUpdateBankData, CreateOrUpdateBankErrors, CreateOrUpdateBankResponses, DeleteDocumentData, DeleteDocumentErrors, DeleteDocumentResponses, GetAgentStatsData, GetAgentStatsErrors, GetAgentStatsResponses, GetBankProfileData, GetBankProfileErrors, GetBankProfileResponses, GetChunkData, GetChunkErrors, GetChunkResponses, GetDocumentData, GetDocumentErrors, GetDocumentResponses, GetEntityData, GetEntityErrors, GetEntityResponses, GetGraphData, GetGraphErrors, GetGraphResponses, HealthEndpointHealthGetData, HealthEndpointHealthGetResponses, ListBanksData, ListBanksResponses, ListDocumentsData, ListDocumentsErrors, ListDocumentsResponses, ListEntitiesData, ListEntitiesErrors, ListEntitiesResponses, ListMemoriesData, ListMemoriesErrors, ListMemoriesResponses, ListOperationsData, ListOperationsErrors, ListOperationsResponses, MetricsEndpointMetricsGetData, MetricsEndpointMetricsGetResponses, RecallMemoriesData, RecallMemoriesErrors, RecallMemoriesResponses, ReflectData, ReflectErrors, ReflectResponses, RegenerateEntityObservationsData, RegenerateEntityObservationsErrors, RegenerateEntityObservationsResponses, RetainMemoriesData, RetainMemoriesErrors, RetainMemoriesResponses, UpdateBankDispositionData, UpdateBankDispositionErrors, UpdateBankDispositionResponses } from './types.gen';

export type Options<TData extends TDataShape = TDataShape, ThrowOnError extends boolean = boolean> = Options2<TData, ThrowOnError> & {
    /**
     * You can provide a client instance returned by `createClient()` instead of
     * individual options. This might be also useful if you want to implement a
     * custom client.
     */
    client?: Client;
    /**
     * You can pass arbitrary values through the `meta` object. This can be
     * used to access values that aren't defined as part of the SDK function.
     */
    meta?: Record<string, unknown>;
};

/**
 * Health check endpoint
 *
 * Checks the health of the API and database connection
 */
export const healthEndpointHealthGet = <ThrowOnError extends boolean = false>(options?: Options<HealthEndpointHealthGetData, ThrowOnError>) => (options?.client ?? client).get<HealthEndpointHealthGetResponses, unknown, ThrowOnError>({ url: '/health', ...options });

/**
 * Prometheus metrics endpoint
 *
 * Exports metrics in Prometheus format for scraping
 */
export const metricsEndpointMetricsGet = <ThrowOnError extends boolean = false>(options?: Options<MetricsEndpointMetricsGetData, ThrowOnError>) => (options?.client ?? client).get<MetricsEndpointMetricsGetResponses, unknown, ThrowOnError>({ url: '/metrics', ...options });

/**
 * Get memory graph data
 *
 * Retrieve graph data for visualization, optionally filtered by type (world/experience/opinion). Limited to 1000 most recent items.
 */
export const getGraph = <ThrowOnError extends boolean = false>(options: Options<GetGraphData, ThrowOnError>) => (options.client ?? client).get<GetGraphResponses, GetGraphErrors, ThrowOnError>({ url: '/v1/default/banks/{bank_id}/graph', ...options });

/**
 * List memory units
 *
 * List memory units with pagination and optional full-text search. Supports filtering by type. Results are sorted by most recent first (mentioned_at DESC, then created_at DESC).
 */
export const listMemories = <ThrowOnError extends boolean = false>(options: Options<ListMemoriesData, ThrowOnError>) => (options.client ?? client).get<ListMemoriesResponses, ListMemoriesErrors, ThrowOnError>({ url: '/v1/default/banks/{bank_id}/memories/list', ...options });

/**
 * Recall memory
 *
 * Recall memory using semantic similarity and spreading activation.
 *
 * The type parameter is optional and must be one of:
 * - 'world': General knowledge about people, places, events, and things that happen
 * - 'experience': Memories about experience, conversations, actions taken, and tasks performed
 * - 'opinion': The bank's formed beliefs, perspectives, and viewpoints
 *
 * Set include_entities=true to get entity observations alongside recall results.
 */
export const recallMemories = <ThrowOnError extends boolean = false>(options: Options<RecallMemoriesData, ThrowOnError>) => (options.client ?? client).post<RecallMemoriesResponses, RecallMemoriesErrors, ThrowOnError>({
    url: '/v1/default/banks/{bank_id}/memories/recall',
    ...options,
    headers: {
        'Content-Type': 'application/json',
        ...options.headers
    }
});

/**
 * Reflect and generate answer
 *
 * Reflect and formulate an answer using bank identity, world facts, and opinions.
 *
 * This endpoint:
 * 1. Retrieves experience (conversations and events)
 * 2. Retrieves world facts relevant to the query
 * 3. Retrieves existing opinions (bank's perspectives)
 * 4. Uses LLM to formulate a contextual answer
 * 5. Extracts and stores any new opinions formed
 * 6. Returns plain text answer, the facts used, and new opinions
 */
export const reflect = <ThrowOnError extends boolean = false>(options: Options<ReflectData, ThrowOnError>) => (options.client ?? client).post<ReflectResponses, ReflectErrors, ThrowOnError>({
    url: '/v1/default/banks/{bank_id}/reflect',
    ...options,
    headers: {
        'Content-Type': 'application/json',
        ...options.headers
    }
});

/**
 * List all memory banks
 *
 * Get a list of all agents with their profiles
 */
export const listBanks = <ThrowOnError extends boolean = false>(options?: Options<ListBanksData, ThrowOnError>) => (options?.client ?? client).get<ListBanksResponses, unknown, ThrowOnError>({ url: '/v1/default/banks', ...options });

/**
 * Get statistics for memory bank
 *
 * Get statistics about nodes and links for a specific agent
 */
export const getAgentStats = <ThrowOnError extends boolean = false>(options: Options<GetAgentStatsData, ThrowOnError>) => (options.client ?? client).get<GetAgentStatsResponses, GetAgentStatsErrors, ThrowOnError>({ url: '/v1/default/banks/{bank_id}/stats', ...options });

/**
 * List entities
 *
 * List all entities (people, organizations, etc.) known by the bank, ordered by mention count.
 */
export const listEntities = <ThrowOnError extends boolean = false>(options: Options<ListEntitiesData, ThrowOnError>) => (options.client ?? client).get<ListEntitiesResponses, ListEntitiesErrors, ThrowOnError>({ url: '/v1/default/banks/{bank_id}/entities', ...options });

/**
 * Get entity details
 *
 * Get detailed information about an entity including observations (mental model).
 */
export const getEntity = <ThrowOnError extends boolean = false>(options: Options<GetEntityData, ThrowOnError>) => (options.client ?? client).get<GetEntityResponses, GetEntityErrors, ThrowOnError>({ url: '/v1/default/banks/{bank_id}/entities/{entity_id}', ...options });

/**
 * Regenerate entity observations
 *
 * Regenerate observations for an entity based on all facts mentioning it.
 */
export const regenerateEntityObservations = <ThrowOnError extends boolean = false>(options: Options<RegenerateEntityObservationsData, ThrowOnError>) => (options.client ?? client).post<RegenerateEntityObservationsResponses, RegenerateEntityObservationsErrors, ThrowOnError>({ url: '/v1/default/banks/{bank_id}/entities/{entity_id}/regenerate', ...options });

/**
 * List documents
 *
 * List documents with pagination and optional search. Documents are the source content from which memory units are extracted.
 */
export const listDocuments = <ThrowOnError extends boolean = false>(options: Options<ListDocumentsData, ThrowOnError>) => (options.client ?? client).get<ListDocumentsResponses, ListDocumentsErrors, ThrowOnError>({ url: '/v1/default/banks/{bank_id}/documents', ...options });

/**
 * Delete a document
 *
 * Delete a document and all its associated memory units and links.
 *
 * This will cascade delete:
 * - The document itself
 * - All memory units extracted from this document
 * - All links (temporal, semantic, entity) associated with those memory units
 *
 * This operation cannot be undone.
 */
export const deleteDocument = <ThrowOnError extends boolean = false>(options: Options<DeleteDocumentData, ThrowOnError>) => (options.client ?? client).delete<DeleteDocumentResponses, DeleteDocumentErrors, ThrowOnError>({ url: '/v1/default/banks/{bank_id}/documents/{document_id}', ...options });

/**
 * Get document details
 *
 * Get a specific document including its original text
 */
export const getDocument = <ThrowOnError extends boolean = false>(options: Options<GetDocumentData, ThrowOnError>) => (options.client ?? client).get<GetDocumentResponses, GetDocumentErrors, ThrowOnError>({ url: '/v1/default/banks/{bank_id}/documents/{document_id}', ...options });

/**
 * Get chunk details
 *
 * Get a specific chunk by its ID
 */
export const getChunk = <ThrowOnError extends boolean = false>(options: Options<GetChunkData, ThrowOnError>) => (options.client ?? client).get<GetChunkResponses, GetChunkErrors, ThrowOnError>({ url: '/v1/default/chunks/{chunk_id}', ...options });

/**
 * List async operations
 *
 * Get a list of all async operations (pending and failed) for a specific agent, including error messages for failed operations
 */
export const listOperations = <ThrowOnError extends boolean = false>(options: Options<ListOperationsData, ThrowOnError>) => (options.client ?? client).get<ListOperationsResponses, ListOperationsErrors, ThrowOnError>({ url: '/v1/default/banks/{bank_id}/operations', ...options });

/**
 * Cancel a pending async operation
 *
 * Cancel a pending async operation by removing it from the queue
 */
export const cancelOperation = <ThrowOnError extends boolean = false>(options: Options<CancelOperationData, ThrowOnError>) => (options.client ?? client).delete<CancelOperationResponses, CancelOperationErrors, ThrowOnError>({ url: '/v1/default/banks/{bank_id}/operations/{operation_id}', ...options });

/**
 * Get memory bank profile
 *
 * Get disposition traits and background for a memory bank. Auto-creates agent with defaults if not exists.
 */
export const getBankProfile = <ThrowOnError extends boolean = false>(options: Options<GetBankProfileData, ThrowOnError>) => (options.client ?? client).get<GetBankProfileResponses, GetBankProfileErrors, ThrowOnError>({ url: '/v1/default/banks/{bank_id}/profile', ...options });

/**
 * Update memory bank disposition
 *
 * Update bank's disposition traits (skepticism, literalism, empathy)
 */
export const updateBankDisposition = <ThrowOnError extends boolean = false>(options: Options<UpdateBankDispositionData, ThrowOnError>) => (options.client ?? client).put<UpdateBankDispositionResponses, UpdateBankDispositionErrors, ThrowOnError>({
    url: '/v1/default/banks/{bank_id}/profile',
    ...options,
    headers: {
        'Content-Type': 'application/json',
        ...options.headers
    }
});

/**
 * Add/merge memory bank background
 *
 * Add new background information or merge with existing. LLM intelligently resolves conflicts, normalizes to first person, and optionally infers disposition traits.
 */
export const addBankBackground = <ThrowOnError extends boolean = false>(options: Options<AddBankBackgroundData, ThrowOnError>) => (options.client ?? client).post<AddBankBackgroundResponses, AddBankBackgroundErrors, ThrowOnError>({
    url: '/v1/default/banks/{bank_id}/background',
    ...options,
    headers: {
        'Content-Type': 'application/json',
        ...options.headers
    }
});

/**
 * Create or update memory bank
 *
 * Create a new agent or update existing agent with disposition and background. Auto-fills missing fields with defaults.
 */
export const createOrUpdateBank = <ThrowOnError extends boolean = false>(options: Options<CreateOrUpdateBankData, ThrowOnError>) => (options.client ?? client).put<CreateOrUpdateBankResponses, CreateOrUpdateBankErrors, ThrowOnError>({
    url: '/v1/default/banks/{bank_id}',
    ...options,
    headers: {
        'Content-Type': 'application/json',
        ...options.headers
    }
});

/**
 * Clear memory bank memories
 *
 * Delete memory units for a memory bank. Optionally filter by type (world, experience, opinion) to delete only specific types. This is a destructive operation that cannot be undone. The bank profile (disposition and background) will be preserved.
 */
export const clearBankMemories = <ThrowOnError extends boolean = false>(options: Options<ClearBankMemoriesData, ThrowOnError>) => (options.client ?? client).delete<ClearBankMemoriesResponses, ClearBankMemoriesErrors, ThrowOnError>({ url: '/v1/default/banks/{bank_id}/memories', ...options });

/**
 * Retain memories
 *
 * Retain memory items with automatic fact extraction.
 *
 * This is the main endpoint for storing memories. It supports both synchronous and asynchronous processing
 * via the async parameter.
 *
 * Features:
 * - Efficient batch processing
 * - Automatic fact extraction from natural language
 * - Entity recognition and linking
 * - Document tracking with automatic upsert (when document_id is provided on items)
 * - Temporal and semantic linking
 * - Optional asynchronous processing
 *
 * The system automatically:
 * 1. Extracts semantic facts from the content
 * 2. Generates embeddings
 * 3. Deduplicates similar facts
 * 4. Creates temporal, semantic, and entity links
 * 5. Tracks document metadata
 *
 * When async=true:
 * - Returns immediately after queuing the task
 * - Processing happens in the background
 * - Use the operations endpoint to monitor progress
 *
 * When async=false (default):
 * - Waits for processing to complete
 * - Returns after all memories are stored
 *
 * Note: If a memory item has a document_id that already exists, the old document and its memory units will be deleted before creating new ones (upsert behavior). Items with the same document_id are grouped together for efficient processing.
 */
export const retainMemories = <ThrowOnError extends boolean = false>(options: Options<RetainMemoriesData, ThrowOnError>) => (options.client ?? client).post<RetainMemoriesResponses, RetainMemoriesErrors, ThrowOnError>({
    url: '/v1/default/banks/{bank_id}/memories',
    ...options,
    headers: {
        'Content-Type': 'application/json',
        ...options.headers
    }
});
